version: "3.1"

stories:

# --- HISTORIA DE CHITCHAT (OPCIONAL PERO RECOMENDADA) ---
- story: Chitchat
  steps:
    - intent: greet
    - action: utter_greet
    - intent: affirm
    - action: utter_ask_what_next

# --- HISTORIA DE NEGOCIO 1: Directo a la cita ---
- story: Flujo de agendamiento (Directo)
  steps:
  - intent: pedir_cita
  - action: appointment_form
  - active_loop: appointment_form
  # 1. User da el nombre (capturado como 'intent: None' por el form)
  - intent: None
  - action: appointment_form
  - active_loop: appointment_form
  # 2. User da la fecha (capturado como 'intent: None')
  - intent: None
  - action: appointment_form
  - active_loop: null # El form termina
  # 3. LA LÓGICA QUE FALTABA:
  - action: action_create_appointment

# --- HISTORIA DE NEGOCIO 2: Saludo -> Cita ---
- story: Flujo de agendamiento (Después de Saludar)
  steps:
  - intent: greet
  - action: utter_greet
  - intent: pedir_cita
  - action: appointment_form
  - active_loop: appointment_form
  # 1. User da el nombre
  - intent: None
  - action: appointment_form
  - active_loop: appointment_form
  # 2. User da la fecha (aquí usamos 'dar_fecha' para más robustez)
  - intent: dar_fecha
  - action: appointment_form
  - active_loop: null # El form termina
  # 3. LA LÓGICA QUE FALTABA:
  - action: action_create_appointment
